{"version":3,"sources":["webpack:///webpack/bootstrap c8188a218521706b2a2e","webpack:///./dist/javascripts/Chess.js","webpack:///./dist/javascripts/index.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;ACtCA;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAkB,kBAAkB;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,oBAAmB,QAAQ;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,OAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAM;AACN;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,IAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAM;AACN,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,eAAc;AACd;AACA,eAAc,OAAO;AACrB;AACA,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,eAAc;AACd;AACA,eAAc,OAAO;AACrB;AACA,eAAc,OAAO;AACrB;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAqC;AACrC;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA,GAAE;;AAEF;AACA;AACA,EAAC,E;;;;;;AC9UD;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAE;;AAEF;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,GAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAC,E","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c8188a218521706b2a2e","(function (global, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['exports'], factory);\n\t} else if (typeof exports !== \"undefined\") {\n\t\tfactory(exports);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod.exports);\n\t\tglobal.Chess = mod.exports;\n\t}\n})(this, function (exports) {\n\t'use strict';\n\n\tObject.defineProperty(exports, \"__esModule\", {\n\t\tvalue: true\n\t});\n\n\tfunction _classCallCheck(instance, Constructor) {\n\t\tif (!(instance instanceof Constructor)) {\n\t\t\tthrow new TypeError(\"Cannot call a class as a function\");\n\t\t}\n\t}\n\n\tvar _createClass = function () {\n\t\tfunction defineProperties(target, props) {\n\t\t\tfor (var i = 0; i < props.length; i++) {\n\t\t\t\tvar descriptor = props[i];\n\t\t\t\tdescriptor.enumerable = descriptor.enumerable || false;\n\t\t\t\tdescriptor.configurable = true;\n\t\t\t\tif (\"value\" in descriptor) descriptor.writable = true;\n\t\t\t\tObject.defineProperty(target, descriptor.key, descriptor);\n\t\t\t}\n\t\t}\n\n\t\treturn function (Constructor, protoProps, staticProps) {\n\t\t\tif (protoProps) defineProperties(Constructor.prototype, protoProps);\n\t\t\tif (staticProps) defineProperties(Constructor, staticProps);\n\t\t\treturn Constructor;\n\t\t};\n\t}();\n\n\tvar _default = {\n\t\tsize: 600, // 棋盘大小\n\t\tshrink: 5, //  棋子大小 = 一格大小 - shrink\n\t\tcolor: ['#000', '#FFF'], // 玩家1 玩家2 颜色\n\t\tbg_texture: 'dist/images/wood.png' //  背景纹理\n\t};\n\n\tvar Chess = function () {\n\t\tfunction Chess(el, options) {\n\t\t\t_classCallCheck(this, Chess);\n\n\t\t\tObject.assign(this, _default, options);\n\t\t\tthis.checkerboard = el;\n\t\t\tthis.cxt = this.checkerboard.getContext('2d');\n\t\t\tthis.gap = this.size / 15;\n\n\t\t\tthis.ignores = [];\n\t\t\tthis.getMousePos = this.getMousePos.bind(this);\n\t\t\tthis.bindEvent();\n\t\t\tthis.init();\n\t\t}\n\t\t/*  绑定事件  */\n\n\n\t\t_createClass(Chess, [{\n\t\t\tkey: 'bindEvent',\n\t\t\tvalue: function bindEvent() {\n\t\t\t\tthis.checkerboard.addEventListener('click', this.getMousePos);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'unbindEvent',\n\t\t\tvalue: function unbindEvent() {\n\t\t\t\tthis.checkerboard.removeEventListener('click', this.getMousePos);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'init',\n\t\t\tvalue: function init() {\n\t\t\t\tthis.cxt.clearRect(0, 0, this.size, this.size);\n\t\t\t\tthis.initSize();\n\t\t\t\tthis.player = 0;\n\t\t\t\tthis.piece_count = 0;\n\t\t\t\tthis.over = false;\n\t\t\t\tthis.pieces = [];\n\t\t\t\tthis.pieces0 = [];\n\t\t\t\tthis.pieces1 = [];\n\t\t\t\tthis.setBg();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'initSize',\n\t\t\tvalue: function initSize() {\n\t\t\t\tthis.checkerboard.width = this.size;\n\t\t\t\tthis.checkerboard.height = this.size;\n\t\t\t\tthis.bounds = this.checkerboard.getBoundingClientRect();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setBg',\n\t\t\tvalue: function setBg() {\n\t\t\t\tvar _this = this;\n\n\t\t\t\tthis.cxt.clearRect(0, 0, this.size, this.size);\n\n\t\t\t\tthis.image = new Image();\n\t\t\t\tthis.image.onload = function () {\n\t\t\t\t\t_this.cxt.fillStyle = _this.cxt.createPattern(_this.image, 'repeat');\n\t\t\t\t\t_this.cxt.fillRect(0, 0, _this.size, _this.size);\n\t\t\t\t\t_this.createGridding();\n\t\t\t\t};\n\n\t\t\t\tthis.image.src = this.bg_texture;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'createGridding',\n\t\t\tvalue: function createGridding() {\n\t\t\t\tthis.cxt.strokeStyle = '#000';\n\t\t\t\tthis.cxt.lineWidth = 1;\n\t\t\t\tfor (var x = 0; x < 15; x++) {\n\t\t\t\t\tthis.cxt.moveTo(x * this.gap + this.gap / 2, this.gap / 2);\n\t\t\t\t\tthis.cxt.lineTo(x * this.gap + this.gap / 2, this.size - this.gap / 2);\n\t\t\t\t\tthis.cxt.moveTo(this.gap / 2, x * this.gap + this.gap / 2);\n\t\t\t\t\tthis.cxt.lineTo(this.size - this.gap / 2, x * this.gap + this.gap / 2);\n\t\t\t\t\tthis.cxt.stroke();\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getMousePos',\n\t\t\tvalue: function getMousePos(e) {\n\t\t\t\tif (this.over) return this.init();\n\t\t\t\tvar mx = e.clientX - this.bounds.left;\n\t\t\t\tvar my = e.clientY - this.bounds.top;\n\t\t\t\tthis.checked(~~(mx / this.gap), ~~(my / this.gap));\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'callback',\n\t\t\tvalue: function callback(word) {\n\t\t\t\talert(word);\n\t\t\t\tthis.cb && this.cb(word);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'checked',\n\t\t\tvalue: function checked(x, y) {\n\t\t\t\tvar _this2 = this;\n\n\t\t\t\tvar index = this.getIndex(x, y);\n\t\t\t\tif (this.pieces.indexOf(index) > -1) return false;\n\t\t\t\tthis.pieces.push(index);\n\t\t\t\tthis['pieces' + this.player].push(index);\n\t\t\t\tthis.createPiece(x, y, index);\n\t\t\t\tthis.isWin(index);\n\t\t\t\tif (!this.over) {\n\t\t\t\t\tthis.player = +!this.player;\n\t\t\t\t} else {\n\t\t\t\t\treturn setTimeout(function () {\n\t\t\t\t\t\treturn _this2.callback((_this2.player ? '白' : '黑') + '\\u68CB\\u83B7\\u5F97\\u4E86\\u80DC\\u5229!');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.piece_count++;\n\t\t\t\tif (this.piece_count === 225) {\n\t\t\t\t\treturn setTimeout(function () {\n\t\t\t\t\t\treturn _this2.callback('\\u548C\\u68CB!');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'createPiece',\n\t\t\tvalue: function createPiece(x, y, index) {\n\t\t\t\tthis.cxt.fillStyle = this.color[this.player];\n\t\t\t\tthis.cxt.shadowColor = '#000';\n\t\t\t\tthis.cxt.shadowBlur = 5;\n\n\t\t\t\tthis.cxt.beginPath();\n\t\t\t\tthis.cxt.arc(x * this.gap + this.gap / 2, y * this.gap + this.gap / 2, (this.gap - this.shrink) / 2, 0, 2 * Math.PI, true);\n\t\t\t\tthis.cxt.closePath();\n\n\t\t\t\tthis.cxt.fill();\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'isWin',\n\t\t\tvalue: function isWin(index) {\n\t\t\t\tvar lines = {\n\t\t\t\t\t's': [index],\n\t\t\t\t\t'h': [index],\n\t\t\t\t\t't': [index],\n\t\t\t\t\t'd': [index]\n\t\t\t\t};\n\t\t\t\tthis.typeLine = this.createTypeLine(index);\n\t\t\t\tthis.setLines(index, lines);\n\t\t\t\tfor (var type in lines) {\n\t\t\t\t\t/*  其中一条线大于等于5个就赢了  */\n\t\t\t\t\tif (lines[type].length >= 5) {\n\t\t\t\t\t\tthis.over = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.ignores = [];\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'setLines',\n\t\t\tvalue: function setLines(index, lines, haveType) {\n\t\t\t\tvar _this3 = this;\n\n\t\t\t\tvar indexs = this.getIndexs(index, haveType);\n\t\t\t\tArray.from(indexs, function (p) {\n\t\t\t\t\tvar type = _this3.getType(index, p);\n\t\t\t\t\tlines[type].push(p);\n\t\t\t\t\t_this3.setLines(p, lines, type);\n\t\t\t\t});\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getIndexs',\n\t\t\tvalue: function getIndexs(index, type) {\n\t\t\t\tvar _this4 = this;\n\n\t\t\t\tthis.ignores.push(index);\n\t\t\t\tvar x = index % 15;\n\t\t\t\tvar y = ~~(index / 15);\n\t\t\t\tvar xs = [x - 1, x, x + 1];\n\t\t\t\tvar ys = [y - 1, y, y + 1];\n\n\t\t\t\tvar n = [];\n\t\t\t\tArray.from(xs, function (i) {\n\t\t\t\t\tArray.from(ys, function (j) {\n\t\t\t\t\t\tif (i < 0 || j < 0) return;\n\t\t\t\t\t\tvar p = j * 15 + i;\n\t\t\t\t\t\tif (_this4.isEnable(p, type)) {\n\t\t\t\t\t\t\tn.push(p);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\treturn n;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'isEnable',\n\t\t\tvalue: function isEnable(index, type) {\n\t\t\t\tif (this.ignores.indexOf(index) > -1) return false;\n\n\t\t\t\tif (type && this.typeLine[type].indexOf(index) === -1) return false;\n\n\t\t\t\tthis.ignores.push(index);\n\t\t\t\tif (this['pieces' + this.player].indexOf(index) > -1) return true;\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'createTypeLine',\n\t\t\tvalue: function createTypeLine(index) {\n\t\t\t\tvar maps = {\n\t\t\t\t\ts: 15,\n\t\t\t\t\th: 1,\n\t\t\t\t\td: 16,\n\t\t\t\t\tt: 14\n\t\t\t\t};\n\t\t\t\tvar obj = {\n\t\t\t\t\t's': [index],\n\t\t\t\t\t'h': [index],\n\t\t\t\t\t't': [index],\n\t\t\t\t\t'd': [index]\n\t\t\t\t};\n\t\t\t\tvar pos = this.getXY(index);\n\t\t\t\tvar x = pos.x;\n\t\t\t\tvar y = pos.y;\n\t\t\t\tfor (var type in maps) {\n\t\t\t\t\tobj[type] = this.getOneTypeLine(type, x, y);\n\t\t\t\t}\n\t\t\t\treturn obj;\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getOneTypeLine',\n\t\t\tvalue: function getOneTypeLine(type, x, y) {\n\t\t\t\tvar arr = [];\n\t\t\t\tvar bx = x;\n\t\t\t\tvar by = y;\n\t\t\t\twhile (x >= 0 && y >= 0 && x <= 14 && y <= 14) {\n\t\t\t\t\tarr.push(this.getIndex(x, y));\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 's':\n\t\t\t\t\t\t\ty += 1;break;\n\t\t\t\t\t\tcase 'h':\n\t\t\t\t\t\t\tx += 1;break;\n\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\tx += 1;y += 1;break;\n\t\t\t\t\t\tcase 't':\n\t\t\t\t\t\t\tx += 1;y -= 1;break;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tx = bx;\n\t\t\t\ty = by;\n\t\t\t\twhile (x >= 0 && y >= 0 && x <= 14 && y <= 14) {\n\t\t\t\t\tarr.push(this.getIndex(x, y));\n\t\t\t\t\tswitch (type) {\n\t\t\t\t\t\tcase 's':\n\t\t\t\t\t\t\ty -= 1;break;\n\t\t\t\t\t\tcase 'h':\n\t\t\t\t\t\t\tx -= 1;break;\n\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\tx -= 1;y -= 1;break;\n\t\t\t\t\t\tcase 't':\n\t\t\t\t\t\t\tx -= 1;y += 1;break;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn arr.slice(1);\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getType',\n\t\t\tvalue: function getType(index, p) {\n\t\t\t\tvar maps = {\n\t\t\t\t\t15: 's',\n\t\t\t\t\t1: 'h',\n\t\t\t\t\t16: 'd',\n\t\t\t\t\t14: 't'\n\t\t\t\t};\n\t\t\t\treturn maps[Math.abs(index - p)]; //  's'竖, 'h'横, 't'上升线, 'd'下降线 \n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getXY',\n\t\t\tvalue: function getXY(index) {\n\t\t\t\treturn {\n\t\t\t\t\tx: index % 15,\n\t\t\t\t\ty: ~~(index / 15)\n\t\t\t\t};\n\t\t\t}\n\t\t}, {\n\t\t\tkey: 'getIndex',\n\t\t\tvalue: function getIndex(x, y) {\n\t\t\t\treturn y * 15 + x;\n\t\t\t}\n\t\t}]);\n\n\t\treturn Chess;\n\t}();\n\n\texports.default = Chess;\n\t;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./dist/javascripts/Chess.js\n// module id = 1\n// module chunks = 0","(function (global, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['./Chess.js'], factory);\n\t} else if (typeof exports !== \"undefined\") {\n\t\tfactory(require('./Chess.js'));\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(global.Chess);\n\t\tglobal.index = mod.exports;\n\t}\n})(this, function (_Chess) {\n\t'use strict';\n\n\tvar _Chess2 = _interopRequireDefault(_Chess);\n\n\tfunction _interopRequireDefault(obj) {\n\t\treturn obj && obj.__esModule ? obj : {\n\t\t\tdefault: obj\n\t\t};\n\t}\n\n\tvar c = new _Chess2.default(document.getElementById('checkerboard'), {\n\t\tcb: gameover\n\t});\n\n\tvar bValue = c.player;\n\tObject.defineProperty(c, 'player', {\n\t\tget: function get() {\n\t\t\treturn bValue;\n\t\t},\n\t\tset: function set(newValue) {\n\t\t\tchangePlayer(newValue);\n\t\t\tbValue = newValue;\n\t\t},\n\t\tenumerable: true,\n\t\tconfigurable: true\n\t});\n\n\tfunction changePlayer(player) {\n\t\tdocument.getElementById('control').textContent = '\\u5F53\\u524D\\u73A9\\u5BB6\\uFF1A' + (player ? '白棋' : '黑旗');\n\t}\n\n\tfunction gameover(result) {\n\t\tdocument.getElementById('control').textContent = result;\n\t}\n\n\tchangePlayer(bValue);\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./dist/javascripts/index.js\n// module id = 2\n// module chunks = 0"],"sourceRoot":""}